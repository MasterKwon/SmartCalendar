<!-- ê³µí†µ CSS íŒŒì¼ ë§í¬ -->
<link rel="stylesheet" href="css/common.css">

<style>
    /* ë¯¸ë‹ˆë‹¬ë ¥ 4ë²ˆ ì „ìš© - ì›”ë³„ ê·¸ë£¹ ë¼ì¸ ìŠ¤íƒ€ì¼ë§ */
    .mini-calendar-grid {
        gap: 0;
    }
    
    .mini-calendar-day {
        border: 1px solid transparent;
        margin: -1px 0 0 -1px;
        border-radius: 4px;
    }
    
    /* ì›”ë³„ ê·¸ë£¹ ë¼ì¸ ìŠ¤íƒ€ì¼ë§ */
    .mini-calendar-day.month-group {
        border: 1px solid transparent;
        border-radius: 0;
    }
    
    /* ì›” ê·¸ë£¹ì˜ ê²½ê³„ì„  ê°•í™” */
    .mini-calendar-day.month-top {
        border-top: 1px solid #d1d5db;
    }
    
    .mini-calendar-day.month-bottom {
        border-bottom: 1px solid #d1d5db;
    }
    
    .mini-calendar-day.month-left {
        border-left: 1px solid #d1d5db;
    }
    
    .mini-calendar-day.month-right {
        border-right: 1px solid #d1d5db;
    }
    
    /* ì„ íƒëœ ë‚ ì§œëŠ” ì‚¬ê°í˜• ìŠ¤íƒ€ì¼ */
    .mini-calendar-day.selected {
        background: #3b82f6 !important;
        color: #fff !important;
        font-weight: 600;
        border-radius: 4px !important;
    }
    
    /* ì˜¤ëŠ˜ ë‚ ì§œëŠ” ì‚¬ê°í˜• ìŠ¤íƒ€ì¼ */
    .mini-calendar-day.today {
        background: #6366f1 !important;
        color: #fff !important;
        font-weight: 600;
        border-radius: 4px !important;
    }
</style>
    
    <div class="mini-calendar-container">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">
            <label style="display: flex; align-items: center; gap: 6px; font-size: 0.85em; color: #495057; cursor: pointer;">
                <input type="checkbox" id="fixedWeeksCheckbox" style="margin: 0;">
                <span>ë‹¬ë ¥í™•ì¥</span>
            </label>
            <button class="today-btn" id="todayBtn" title="ì˜¤ëŠ˜ë¡œ ì´ë™">ì˜¤ëŠ˜</button>
        </div>
        <div class="mini-calendar-header">
            <div class="mini-calendar-title" id="miniCalendarTitle">
                <span id="miniCalendarYearMonth">2025.06</span>
            </div>
            <div class="mini-calendar-controls">
                <button id="miniPrevBtn" title="ì´ì „">&#x2039;</button>
                <button id="miniNextBtn" title="ë‹¤ìŒ">&#x203A;</button>
            </div>
        </div>
        <div class="mini-calendar-grid" id="miniCalendarGrid">
            <!-- ìš”ì¼/ë‚ ì§œ ë™ì  ìƒì„± -->
        </div>
    </div>
    
    <script>
        // CalendarCore.js ë¡œë”© í™•ì¸
        if (typeof CalendarCore === 'undefined') {
            console.error('CalendarCore.js not loaded');
        }

        // ê³µí†µ ìƒìˆ˜ë“¤ - CalendarCore.jsì—ì„œ ê°€ì ¸ì˜¤ê¸°
        const coreREF_DATE = CalendarCore.REFERENCE_DATE;
        const coreBASE_DATE = CalendarCore.BASE_DATE;
        const coreNEXT_BLOCK_DATE = CalendarCore.NEXT_BLOCK_DATE;
        const coreMINI_WEEK_DAYS = CalendarCore.MINI_WEEK_DAYS;

        // ê¸°ì¡´ ì¤‘ë³µ ì½”ë“œë“¤ (ì£¼ì„ ì²˜ë¦¬)
        // const REFERENCE_DATE = new Date(2025, 8, 1); // 2025-09-01
        const miniWeekDays = coreMINI_WEEK_DAYS; // ['M', 'T', 'W', 'T', 'F', 'S', 'S'];
        let miniCurrentDate = new Date(); // ì˜¤ëŠ˜ ë‚ ì§œë¡œ ì´ˆê¸°í™”
        let miniSelectedDate = new Date(); // ì˜¤ëŠ˜ ë‚ ì§œë¡œ ì´ˆê¸°í™”
    
        // ê¸°ì¡´ ì¤‘ë³µ í•¨ìˆ˜ (ì£¼ì„ ì²˜ë¦¬)
        // function isAfterReferenceDate(date) {
        //     return date >= REFERENCE_DATE;
        // }

        // CalendarCore.jsì˜ í•¨ìˆ˜ ì‚¬ìš©
        function isAfterReferenceDate(date) {
            return CalendarCore.isAfterReferenceDate(date);
        }
    
        function renderMiniCalendar() {
            const grid = document.getElementById('miniCalendarGrid');
            const isFixedWeeks = document.getElementById('fixedWeeksCheckbox').checked;
            grid.innerHTML = '';
            // ìš”ì¼ í—¤ë”
            miniWeekDays.forEach((d, i) => {
                const wd = document.createElement('div');
                wd.className = 'mini-calendar-weekday';
                if (i === 5) wd.style.color = '#ef4444';
                if (i === 6) wd.style.color = '#ef4444';
                wd.textContent = d;
                grid.appendChild(wd);
            });
            // í˜„ì¬ ì›”/4ì£¼ ì •ë³´
            const year = miniCurrentDate.getFullYear();
            const month = miniCurrentDate.getMonth();
            const header = document.getElementById('miniCalendarYearMonth');
            const titleDiv = document.getElementById('miniCalendarTitle');
            
            // ê¸°ì¡´ í•˜ë“œì½”ë”© (ì£¼ì„ ì²˜ë¦¬)
            // const base = new Date(2025, 8, 1); // 2025-09-01
            // const nextBlock = new Date(base);
            // nextBlock.setDate(base.getDate() + 28); // 2025-09-29
            
            // CalendarCore.jsì˜ ìƒìˆ˜ ì‚¬ìš©
            const base = coreREF_DATE;
            const nextBlock = coreNEXT_BLOCK_DATE;
            
            if (isAfterReferenceDate(miniCurrentDate)) {
                // CalendarCore.jsì˜ 4ì£¼ ë‹¬ë ¥ ë‚ ì§œ ê³„ì‚° í•¨ìˆ˜ ì‚¬ìš©
                const startDate = CalendarCore.get4WeekStartDate(miniCurrentDate);
                const displayStartDate = CalendarCore.get4WeekDisplayStartDate(startDate);
                const displayEndDate = CalendarCore.get4WeekDisplayEndDate(displayStartDate);
                header.textContent = CalendarCore.formatDateRange(displayStartDate, displayEndDate);
                titleDiv.classList.add('small');
                
                // í‘œì‹œí•  ì£¼ ìˆ˜ ê³„ì‚° (4ì£¼ ë‹¬ë ¥ìš©)
                let weeksToShow = 6; // ê¸°ë³¸ 6ì£¼ (ì²«ì£¼, 4ì£¼, ë§ˆì§€ë§‰ì£¼)
                if (!isFixedWeeks) {
                    weeksToShow = 4; // ì¤‘ê°„ 4ì£¼ë§Œ í‘œì‹œ
                }
                
                const totalDays = weeksToShow === 6 ? 42 : 28;
                const startIndex = weeksToShow === 6 ? 0 : 7; // 6ì£¼ë©´ 0ë¶€í„°, 4ì£¼ë©´ 7ë¶€í„°
                
                // ë¨¼ì € ëª¨ë“  ë‚ ì§œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘
                const allDays = [];
                for (let i = startIndex; i < startIndex + totalDays; i++) {
                    const d = new Date(startDate);
                    d.setDate(startDate.getDate() + i);
                    allDays.push({
                        date: d,
                        index: i,
                        isActive: weeksToShow === 4 || (i >= 7 && i < 35)
                    });
                }
                
                // í™œì„±í™”ëœ ë‚ ì§œë“¤ë§Œ í•„í„°ë§í•˜ì—¬ ì›”ë³„ ê·¸ë£¹ ìƒì„±
                const activeDays = allDays.filter(day => day.isActive);
                const monthGroups = {};
                
                activeDays.forEach(day => {
                    const monthKey = `${day.date.getFullYear()}-${day.date.getMonth()}`;
                    if (!monthGroups[monthKey]) {
                        monthGroups[monthKey] = [];
                    }
                    monthGroups[monthKey].push(day);
                });
                
                // ì›”ë³„ ë‚ ì§œ ìˆ˜ ê³„ì‚°í•˜ì—¬ ì£¼ë„ê¶Œ ê²°ì •
                const monthCounts = {};
                let dominantMonth = null;
                let maxCount = 0;
                let earliestMonth = null;
                
                Object.keys(monthGroups).forEach(monthKey => {
                    const group = monthGroups[monthKey];
                    monthCounts[monthKey] = group.length;
                    
                    if (group.length > maxCount) {
                        maxCount = group.length;
                        dominantMonth = monthKey;
                        earliestMonth = monthKey;
                    } else if (group.length === maxCount) {
                        // ë™ì ì¸ ê²½ìš° ë” ì´ë¥¸ ì›”ì„ ì„ íƒ
                        if (!earliestMonth || monthKey < earliestMonth) {
                            dominantMonth = monthKey;
                            earliestMonth = monthKey;
                        }
                    }
                });
                
                // ì£¼ë„ê¶Œì„ ê°€ì§„ ì›”ì˜ ë‚ ì§œì—ë§Œ ê²½ê³„ì„  ì ìš©
                Object.keys(monthGroups).forEach(monthKey => {
                    const group = monthGroups[monthKey];
                    const isDominant = (monthKey === dominantMonth);
                    
                    group.forEach((day, dayIndex) => {
                        // ëª¨ë“  ë‚ ì§œì— ê¸°ë³¸ ê·¸ë£¹ ìŠ¤íƒ€ì¼ ì ìš©
                        day.hasGroupStyle = true;
                        
                        // ì£¼ë„ê¶Œì„ ê°€ì§„ ì›”ì—ë§Œ ê²½ê³„ì„  ì ìš©
                        if (isDominant) {
                            const gridIndex = day.index;
                            const dayOfWeek = (day.date.getDay() + 6) % 7; // ì›”ìš”ì¼=0
                            
                            // ì›” ê·¸ë£¹ì˜ ê²½ê³„ì„  ì„¤ì •
                            day.needsTopBorder = false;
                            day.needsBottomBorder = false;
                            day.needsLeftBorder = false;
                            day.needsRightBorder = false;
                            
                            // 4ì£¼ ëª¨ë“œì™€ 6ì£¼ ëª¨ë“œì— ë”°ë¥¸ ê²½ê³„ ë²”ìœ„ ì„¤ì •
                            const activeStart = weeksToShow === 6 ? 7 : startIndex;
                            const activeEnd = weeksToShow === 6 ? 35 : (startIndex + totalDays);
                            
                            // ìœ„ìª½ ê²½ê³„ì„  ì²´í¬
                            const upperIndex = gridIndex - 7;
                            if (upperIndex < activeStart || upperIndex >= activeEnd) {
                                // ìœ„ìª½ì´ ë¹„í™œì„± ì˜ì—­ì¸ ê²½ìš°
                                day.needsTopBorder = true;
                            } else {
                                // allDaysì—ì„œ í•´ë‹¹ ì¸ë±ìŠ¤ ì°¾ê¸°
                                const upperDay = allDays.find(d => d.index === upperIndex);
                                if (upperDay && upperDay.isActive && upperDay.date.getMonth() !== day.date.getMonth()) {
                                    day.needsTopBorder = true;
                                }
                            }
                            
                            // ì•„ë˜ìª½ ê²½ê³„ì„  ì²´í¬
                            const lowerIndex = gridIndex + 7;
                            if (lowerIndex >= activeStart && lowerIndex < activeEnd) {
                                const lowerDay = allDays.find(d => d.index === lowerIndex);
                                if (lowerDay && lowerDay.isActive && lowerDay.date.getMonth() !== day.date.getMonth()) {
                                    day.needsBottomBorder = true;
                                }
                            } else if (lowerIndex >= activeEnd) {
                                // ì•„ë˜ìª½ì´ ë¹„í™œì„± ì˜ì—­ì¸ ê²½ìš°
                                day.needsBottomBorder = true;
                            }
                            
                            // ì™¼ìª½ ê²½ê³„ì„  ì²´í¬
                            if (dayOfWeek === 0) {
                                // ì›”ìš”ì¼ì¸ ê²½ìš°
                                day.needsLeftBorder = true;
                            } else {
                                const leftIndex = gridIndex - 1;
                                const leftDay = allDays.find(d => d.index === leftIndex);
                                if (leftDay && leftDay.isActive && leftDay.date.getMonth() !== day.date.getMonth()) {
                                    day.needsLeftBorder = true;
                                }
                            }
                            
                            // ì˜¤ë¥¸ìª½ ê²½ê³„ì„  ì²´í¬
                            if (dayOfWeek === 6) {
                                // ì¼ìš”ì¼ì¸ ê²½ìš°
                                day.needsRightBorder = true;
                            } else {
                                const rightIndex = gridIndex + 1;
                                const rightDay = allDays.find(d => d.index === rightIndex);
                                if (rightDay && rightDay.isActive && rightDay.date.getMonth() !== day.date.getMonth()) {
                                    day.needsRightBorder = true;
                                }
                            }
                        } else {
                            // ë¹„ì£¼ë„ê¶Œ ì›”ì€ ì›”ë³„ ê²½ê³„ì„  ì—†ìŒ
                            day.needsTopBorder = false;
                            day.needsBottomBorder = false;
                            day.needsLeftBorder = false;
                            day.needsRightBorder = false;
                        }
                        
                        // ëª¨ë“  ë‚ ì§œì— ì „ì²´ í™œì„± ì˜ì—­ì˜ ì™¸ê³½ ë¼ì¸ ì¶”ê°€ ì ìš©
                        const gridIndex = day.index;
                        const dayOfWeek = (day.date.getDay() + 6) % 7; // ì›”ìš”ì¼=0
                        
                        // í™œì„± ì˜ì—­ì˜ ê²½ê³„ ì„¤ì •
                        const topBoundary = weeksToShow === 6 ? [7, 13] : [startIndex, startIndex + 6];
                        const bottomBoundary = weeksToShow === 6 ? [28, 34] : [startIndex + totalDays - 7, startIndex + totalDays - 1];
                        
                        // ë§¨ ìœ„ìª½ í–‰ì— ìƒë‹¨ ë¼ì¸ ì¶”ê°€
                        if (gridIndex >= topBoundary[0] && gridIndex <= topBoundary[1]) {
                            day.needsTopBorder = true;
                        }
                        
                        // ë§¨ ì•„ë˜ìª½ í–‰ì— í•˜ë‹¨ ë¼ì¸ ì¶”ê°€
                        if (gridIndex >= bottomBoundary[0] && gridIndex <= bottomBoundary[1]) {
                            day.needsBottomBorder = true;
                        }
                        
                        // ë§¨ ì™¼ìª½ ì—´ (ì›”ìš”ì¼ ìœ„ì¹˜)ì— ì¢Œì¸¡ ë¼ì¸ ì¶”ê°€
                        if (dayOfWeek === 0) {
                            day.needsLeftBorder = true;
                        }
                        
                        // ë§¨ ì˜¤ë¥¸ìª½ ì—´ (ì¼ìš”ì¼ ìœ„ì¹˜)ì— ìš°ì¸¡ ë¼ì¸ ì¶”ê°€
                        if (dayOfWeek === 6) {
                            day.needsRightBorder = true;
                        }
                    });
                });
                
                // ì‹¤ì œ DOM ìƒì„±
                for (let i = 0; i < allDays.length; i++) {
                    const dayData = allDays[i];
                    const d = dayData.date;
                    const cell = document.createElement('div');
                    cell.className = 'mini-calendar-day';
                    
                    if (!dayData.isActive) {
                        // ì²« ì£¼(0~6), ë§ˆì§€ë§‰ ì£¼(35~41)ëŠ” ë¹„í™œì„±í™”(íšŒìƒ‰), ë‚ ì§œëŠ” í‘œì‹œ
                        cell.classList.add('disabled');
                        cell.textContent = d.getDate();
                    } else {
                        // ê°€ìš´ë° 4ì£¼ë§Œ í™œì„±í™”
                        if (d.getDay() === 6) cell.classList.add('saturday');
                        if (d.getDay() === 0) cell.classList.add('sunday');
                        
                        const today = new Date();
                        if (d.getFullYear() === today.getFullYear() && d.getMonth() === today.getMonth() && d.getDate() === today.getDate()) {
                            cell.classList.add('today');
                        }
                        if (miniSelectedDate && d.getFullYear() === miniSelectedDate.getFullYear() && d.getMonth() === miniSelectedDate.getMonth() && d.getDate() === miniSelectedDate.getDate()) {
                            cell.classList.add('selected');
                        }
                        
                        // ì›” ê·¸ë£¹ ë¼ì¸ ìŠ¤íƒ€ì¼ ì ìš©
                        if (dayData.hasGroupStyle) {
                            cell.classList.add('month-group');
                            
                            if (dayData.needsTopBorder) cell.classList.add('month-top');
                            if (dayData.needsBottomBorder) cell.classList.add('month-bottom');
                            if (dayData.needsLeftBorder) cell.classList.add('month-left');
                            if (dayData.needsRightBorder) cell.classList.add('month-right');
                        }
                        
                        cell.textContent = d.getDate();
                        
                        cell.addEventListener('click', () => {
                            miniSelectedDate = new Date(d);
                            renderMiniCalendar();
                            
                            // ğŸ”— ë©”ì¸ í˜ì´ì§€ë¡œ ì„ íƒëœ ë‚ ì§œ ì „ë‹¬
                            if (typeof window.onMiniCalendarDateSelect === 'function') {
                                window.onMiniCalendarDateSelect(new Date(d));
                            }
                        });
                    }
                    grid.appendChild(cell);
                }
            } else {
                // ì›” ë‹¨ìœ„
                header.textContent = `${year}.${String(month+1).padStart(2,'0')}`;
                titleDiv.classList.remove('small');
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month+1, 0);
                let start = new Date(firstDay);
                let firstDayOfWeek = (firstDay.getDay() + 6) % 7; // ì›”ìš”ì¼=0
                start.setDate(start.getDate() - firstDayOfWeek);
                // í‘œì‹œí•  ì£¼ ìˆ˜ ê³„ì‚°
                let weeksToShow = 6; // ê¸°ë³¸ 6ì£¼
                if (!isFixedWeeks) {
                    // í•´ë‹¹ ì›”ë§Œ í‘œì‹œí•˜ê¸° ìœ„í•œ ìµœì†Œ ì£¼ ìˆ˜ ê³„ì‚°
                    const lastDayOfWeek = (lastDay.getDay() + 6) % 7; // ì›”ìš”ì¼=0
                    const daysFromStart = firstDayOfWeek + lastDay.getDate();
                    weeksToShow = Math.ceil(daysFromStart / 7);
                }
                
                const totalDays = weeksToShow * 7;
                for (let i=0; i<totalDays; i++) {
                    const d = new Date(start);
                    d.setDate(start.getDate() + i);
                    const cell = document.createElement('div');
                    cell.className = 'mini-calendar-day';
                    if (d < firstDay || d > lastDay) {
                        cell.classList.add('other-month');
                        cell.textContent = d.getDate();
                    } else {
                        if (d.getDay() === 6) cell.classList.add('saturday');
                        if (d.getDay() === 0) cell.classList.add('sunday');
                        const today = new Date();
                        if (d.getFullYear() === today.getFullYear() && d.getMonth() === today.getMonth() && d.getDate() === today.getDate()) {
                            cell.classList.add('today');
                        }
                        if (miniSelectedDate && d.getFullYear() === miniSelectedDate.getFullYear() && d.getMonth() === miniSelectedDate.getMonth() && d.getDate() === miniSelectedDate.getDate()) {
                            cell.classList.add('selected');
                        }
                        cell.textContent = d.getDate();
                        cell.addEventListener('click', () => {
                            miniSelectedDate = new Date(d);
                            renderMiniCalendar();
                            
                            // ğŸ”— ë©”ì¸ í˜ì´ì§€ë¡œ ì„ íƒëœ ë‚ ì§œ ì „ë‹¬
                            if (typeof window.onMiniCalendarDateSelect === 'function') {
                                window.onMiniCalendarDateSelect(new Date(d));
                            }
                        });
                    }
                    grid.appendChild(cell);
                }
            }
        }
        document.getElementById('miniPrevBtn').onclick = () => {
            // ê¸°ì¡´ í•˜ë“œì½”ë”© (ì£¼ì„ ì²˜ë¦¬)
            // const base = new Date(2025, 8, 1); // 2025-09-01
            // const nextBlock = new Date(base);
            // nextBlock.setDate(base.getDate() + 28); // 2025-09-29
            
            // CalendarCore.jsì˜ ìƒìˆ˜ ì‚¬ìš©
            const base = coreREF_DATE;
            const nextBlock = coreNEXT_BLOCK_DATE;
            // ê¸°ì¡´ ì¤‘ë³µ ë¡œì§ (ì£¼ì„ ì²˜ë¦¬)
            // if (miniCurrentDate < base) {
            //     miniCurrentDate.setMonth(miniCurrentDate.getMonth() - 1);
            // } else if (miniCurrentDate >= base && miniCurrentDate < nextBlock) {
            //     // 9ì›” 1ì¼ì´ë©´ 4ì£¼ ë¹¼ì„œ 8ì›”ë¡œ ì´ë™ (ì›”ìš”ì¼ë¡œ ë³´ì •)
            //     const day = miniCurrentDate.getDay();
            //     const diffToMonday = (day === 0 ? -6 : 1 - day);
            //     let monday = new Date(miniCurrentDate);
            //     monday.setDate(miniCurrentDate.getDate() + diffToMonday);
            //     monday.setDate(monday.getDate() - 28);
            //     miniCurrentDate = monday;
            // } else if (miniCurrentDate < nextBlock) {
            //     miniCurrentDate = new Date(base);
            // } else {
            //     const day = miniCurrentDate.getDay();
            //     const diffToMonday = (day === 0 ? -6 : 1 - day);
            //     let monday = new Date(miniCurrentDate);
            //     monday.setDate(miniCurrentDate.getDate() + diffToMonday);
            //     monday.setDate(monday.getDate() - 28);
            //     miniCurrentDate = monday;
            // }
            
            // CalendarCore.jsì˜ í•¨ìˆ˜ ì‚¬ìš©
            miniCurrentDate = CalendarCore.moveToPreviousDate(miniCurrentDate);
            renderMiniCalendar();
        };
        document.getElementById('miniNextBtn').onclick = () => {
            // ê¸°ì¡´ í•˜ë“œì½”ë”© (ì£¼ì„ ì²˜ë¦¬)
            // const base = new Date(2025, 8, 1); // 2025-09-01
            // const nextBlock = new Date(base);
            // nextBlock.setDate(base.getDate() + 28); // 2025-09-29
            
            // CalendarCore.jsì˜ ìƒìˆ˜ ì‚¬ìš©
            const base = coreREF_DATE;
            const nextBlock = coreNEXT_BLOCK_DATE;
            // ê¸°ì¡´ ì¤‘ë³µ ë¡œì§ (ì£¼ì„ ì²˜ë¦¬)
            // if (miniCurrentDate < base) {
            //     miniCurrentDate.setMonth(miniCurrentDate.getMonth() + 1);
            // } else if (miniCurrentDate >= base && miniCurrentDate < nextBlock) {
            //     miniCurrentDate = new Date(nextBlock);
            // } else {
            //     const day = miniCurrentDate.getDay();
            //     const diffToMonday = (day === 0 ? -6 : 1 - day);
            //     let monday = new Date(miniCurrentDate);
            //     monday.setDate(miniCurrentDate.getDate() + diffToMonday);
            //     monday.setDate(monday.getDate() + 28);
            //     miniCurrentDate = monday;
            // }
            
            // CalendarCore.jsì˜ í•¨ìˆ˜ ì‚¬ìš©
            miniCurrentDate = CalendarCore.moveToNextDate(miniCurrentDate);
            renderMiniCalendar();
        };
        // Today ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        document.getElementById('todayBtn').onclick = () => {
            const today = new Date();
            miniCurrentDate = new Date(today);
            miniSelectedDate = new Date(today);
            renderMiniCalendar();
            
            // ğŸ”— ë©”ì¸ í˜ì´ì§€ë¡œ ì„ íƒëœ ë‚ ì§œ ì „ë‹¬
            if (typeof window.onMiniCalendarDateSelect === 'function') {
                window.onMiniCalendarDateSelect(new Date(today));
            }
        };
        
                    // ë‹¬ë ¥í™•ì¥ ì²´í¬ë°•ìŠ¤ ë³€ê²½ ì´ë²¤íŠ¸
        document.getElementById('fixedWeeksCheckbox').addEventListener('change', () => {
            renderMiniCalendar();
        });
        
        renderMiniCalendar();
    </script> 